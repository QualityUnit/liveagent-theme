/* stylelint-disable selector-class-pattern, no-descending-specificity */

@use "../common/variables" as *;
@use "../common/mixins" as *;
@use "../components/HeaderLanguageSwitcher" as *;
@use "../components/Login" as *;
@forward "../components/AnnouncementBar";

$bg-color: #f9f9fa;

$label-overview-bg: $desaturated-violet;
$label-learn-bg: $desaturated-green;
$label-product-bg: $medium-orange;
$label-use-for-bg: $desaturated-blue;
$label-company-bg: $desaturated-red;

#app {
	padding-top: $header-height;
}

.Header {

	@include color(background-color, header-background);
	position: fixed;
	top: 0;
	z-index: 100;
	width: 100%;
	height: $header-height;
	padding: 15px 0;

	.wrapper {

		@media (max-width: $breakpoint-tablet-landscape - 1px) {
			padding-inline: 20px !important;
		}
		display: flex;
		flex-flow: wrap row;
		justify-content: space-between;
		align-items: center;
	}
}

.admin-bar {

	.Header {
		top: 32px;
	}
}

.Header__logo {
	display: flex;

	a {
		display: block;
		width: 100%;
		height: 100%;
		padding: 15px 15px 15px 0;

		img {
			display: block;
			max-width: 130px;
			height: 30px;
		}
	}
}

.Header__items {
	display: flex;
	flex-flow: wrap row;
	justify-content: flex-end;
	align-items: center;

	@media (max-width: $breakpoint-tablet-landscape - 1px) {
		flex-flow: wrap row-reverse;
	}
}

.Header__navigation {
	display: none;

	&.active {

		background-color: $white;
		display: block;
		position: absolute;
		width: 100%;
		top: 75px;
		left: 0;
		z-index: 9999999;
		max-height: calc(85vh - 90px);
		overflow-y: scroll;
		text-align: center;
		padding-bottom: 1.5em;
		box-shadow: 0 4px 6px 0 rgba(0, 0, 0, 0.06);

		&.mobile-active {

			.Header__navigation__promo {
				margin-left: 3em;
				padding-bottom: 1em;
				background-color: $bg-color;
			}

			.menu-item-description {

				@include color(color, font-color-level3);
				display: block;
				font-size: 12px;
				line-height: 1.5;
				font-weight: $font-weight-normal;
				margin-top: -3px;
				width: calc(100% - 33px);
				white-space: break-spaces;
			}

			ul.nav {

				> li {
					padding: 0;

					&.active {

						> a {
							background-color: $pricing-gray;
						}

						> ul {

							&.active {

								> li {
									padding: 0;

									&.label-product {

										li.current-menu-item {
											background-color: $label-product-bg;
										}
									}

									&.label-overview {

										li.current-menu-item {
											background-color: $label-overview-bg;
										}
									}

									&.label-use-for {

										li.current-menu-item {
											background-color: $label-use-for-bg;
										}
									}

									&.label-company {

										li.current-menu-item {
											background-color: $label-company-bg;
										}
									}

									&.label-learn {

										li.current-menu-item {
											background-color: $label-learn-bg;
										}
									}

									> a {
										display: none;
									}

									> ul {
										display: block;
									}
								}
							}
						}
					}

					> a {
						padding: 0 20px;

						&::before {
							content: unset;
						}
					}

					> ul {

						> li {

							&.active {

								> a {
									background-color: $pricing-gray;
								}

								ul {

									&.active {
										display: flex;
									}
								}
							}

							&.label-integrations {
								display: none;
							}

							&.label-sub {

								> a {
									display: none !important;
								}

							}


							> ul {
								display: none;
								background-color: $bg-color;

								> li {
									padding-block: 10px;
									margin-bottom: 0;
									background-color: $bg-color;

									&::after {
										content: unset;
									}

									.icon {
										left: 1.3em;
										margin-top: 0.6em;
									}

									> a {
										display: flex;
										flex-direction: column;
										width: 100%;
										padding: 0 50px;

										&::after {
											content: unset;
										}
									}
								}
							}

						}
					}

					ul {

						li {

							a {
								padding: 0 20px;
							}
						}
					}

				}
			}
		}
	}

	&__promo {
		max-width: 184px;
		cursor: pointer;

		* {
			width: 100%;
		}
	}

	&__buttons {

		&__mobile {
			display: flex;
			flex-direction: column-reverse;
			padding-top: 0.5em;

			.Button {
				width: 100%;

				&--login {
					text-align: left;
					height: auto;

					span {
						padding: 0 20px;
						font-size: 16px;
						line-height: 60px;
						margin: 0;

					}
				}

				&--full {
					margin: 0.5em 20px;
					width: calc(100% - 40px);
				}
			}

			@media (min-width: $breakpoint-tablet-landscape) {
				display: none;
			}
		}

		a.Button {
			display: none;
			max-height: 3em;
			margin-right: 1.5em;
			padding-inline: 1em;

			&.Button--login {
				margin: 0;
			}

			&.Button--outline {
				display: flex;
				width: 100px;
			}
		}

	}

	ul.nav {
		position: relative;
		margin-bottom: 0;


		li {
			position: static;
			user-select: none;
			padding: 0 20px;

			&.one-column {

				ul {
					left: -25px;

					li {
						padding: 0 45px;

						ul {
							padding-bottom: 0;

							li {
								padding: 0;
							}
						}
					}
				}
			}

			a {

				@include color(color, main-nav-font-color);
				position: relative;
				display: flex;
				justify-content: space-between;
				font-size: $main-nav-font-size;
				line-height: $main-nav-line-height;
				font-family: $font-secondary;
				font-weight: $font-weight-semi;
				text-decoration: none;

				&::before {

					@include color(background-color, main-nav-underline);
					content: "";
					position: absolute;
					bottom: 13px;
					left: 50%;
					width: 0;
					height: 3px;
					transition: all 0.3s;
				}
			}

			@media (hover: hover) {

				&:active,
				&:focus,
				&:hover {

					a {

						&::before {
							left: 0;
							width: 100%;
						}
					}
				}
			}


			&.menu-item-has-children {

				a {

					&::after {
						content: "\e821";
						font-family: fontello, sans-serif;
						font-size: 12px;
						font-weight: 900;
						display: inline-block;
						margin-left: 10px;

					}
				}

				&.active {

					> a {

						&::after {
							transform: rotate(180deg);
						}
					}
				}

				ul {

					li {

						a {

							&::before {
								content: unset;
							}

						}
					}
				}
			}
		}

		ul {

			display: none;
			position: relative;

			&.active {
				display: block;
			}

			li {
				width: 100%;

			}

			a {

				@include color(color, main-nav-submenu-font-color, !important);
				font-size: $main-nav-submenu-font-size;
				line-height: $main-nav-submenu-line-height;
				font-family: $font-secondary;
				font-weight: $font-weight-semi;
				white-space: nowrap;
				text-align: left;

				&:active,
				&:focus,
				&:hover {

					@include color(color, main-nav-submenu-font-color-hover, !important);
				}
			}

			a[href="#"] {
				margin-bottom: 20px;
				font-size: 14px;
				line-height: 0;
				cursor: default;
				padding: 10px 0;
			}

			ul {
				display: flex;
				position: static;
				flex-flow: wrap column;
				justify-content: flex-start;
				align-items: flex-start;

				li {
					position: relative;
					display: flex;
					flex-flow: wrap row;
					justify-content: flex-start;
					align-items: center;
					width: 100%;
					margin-bottom: 20px;
					padding: 0;
					overflow: visible;

					&.label {

						a {
							position: relative;
							width: 100%;
							overflow: hidden;

							&::after {

								@include color(background-color, primary-color);
								@include color(color, font-color-light);
								content: "";
								position: absolute;
								top: 8px;
								right: 0;
								display: inline-block !important;
								font-family: $font-primary !important;
								padding: 2px 4px;
								border-radius: 2px;
								font-size: 10px;
								line-height: 1;
								text-transform: uppercase;
							}
						}

						&-new {

							a {

								&::after {
									content: "new";
								}
							}
						}

						&-top {

							a {

								&::after {
									content: "top";
								}
							}
						}

						&-trending {

							a {

								&::after {
									content: "trending";
								}
							}
						}
					}

					.icon {

						@include square(1.25rem);
						display: block;
						position: absolute;
						pointer-events: none;
						z-index: 1;
						left: 0.15em;
						top: 0.25em;
					}

					&::after {
						content: "";
						position: absolute;
						left: -20px;
						bottom: -10px;
						height: calc(100% + 20px);
						width: 0;
						background-color: #feefe0;
						transition: all 0.5s ease;
					}

					&:hover {

						&::after {
							width: 100%;
						}
					}

					a {
						font-family: $font-secondary;
						padding-left: 33px;
						z-index: 1;
					}

					&:first-of-type {
						padding-right: 0;
					}

				}

			}
		}

	}

	.icon-header-menu {
		left: 0;
		width: 24px;
		background-size: 176px;

		&::before {

			@include square(1.5rem);
			display: block;
			position: absolute;
			pointer-events: none;
			z-index: 1;
			content: "";
			font-size: 20px;
			left: 0;
			top: 2px;
		}
	}

	$iconHeader: (
		"whatsapp": "-152px 2px",
		"wordpress": "-16px 2px",
		"prestashop": "-234px 2px",
		"magento": "4px 2px",
		"shopify": "-81px 1px",
		"mailchimp": "-105px 0px",
		"pipedrive": "-132px 2px",
		"slack": "-36px 2px",
	);

	@each $icon, $pos in $iconHeader {
		.icon-header-menu-#{$icon}:before {
			background: url(../../images/icons-menu-integrations.png) #{$pos};
			background-size: 176px;
		}
	}

	.label-overview {

		a[href="#"],
		.icon,
		li::before {
			color: $saturated-violet !important;
		}

		.sub-menu {
			width: 100%;
		}

		::after {
			background-color: #f3e6ff !important;
		}
	}

	.label-product {

		a[href="#"],
		.icon {
			color: $dark-orange !important;
		}

		::after {
			background-color: $medium-orange !important;
		}
	}

	.label-use-for {

		a[href="#"],
		.icon {
			color: $saturated-blue !important;
		}

		::after {
			background-color: $desaturated-blue !important;
		}
	}

	.label-integrations {
		padding: 0 70px 0 30px !important;

		ul li {
			padding: 0 !important;
			margin: 0 !important;
		}

		a[href="#"] {
			color: #ababab !important;
		}

		> * {
			position: relative;
			z-index: 1;
		}

		::after {
			background-color: $lightest-gray !important;
			left: -10px !important;
			bottom: 2px !important;
			height: 30px !important;
			z-index: 0;
		}

		li:last-child {

			a {
				color: #ababab !important;
				font-size: 12px !important;
			}
		}
	}

	.label-learn {

		a[href="#"],
		.icon {
			color: $saturated-green !important;
		}

		::after {
			background-color: $desaturated-green !important;
		}
	}

	.label-company {

		a[href="#"],
		.icon {
			color: $saturated-red !important;
		}

		::after {
			background-color: $desaturated-red !important;
		}
	}

	.label-liveagent {

		a[href="#"],
		.icon {
			color: $saturated-cyan !important;
		}

		::after {
			background-color: $desaturated-cyan !important;
		}
	}

	.label-sub {

		a[href="#"] {
			color: transparent !important;

			@media (max-width: ($breakpoint-tablet-landscape - 1px)) {
				display: none;
			}
		}
	}


	@media (min-width: $breakpoint-tablet-landscape) {
		display: flex;
		flex-flow: wrap row;
		justify-content: center;
		align-items: center;

		&__buttons {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 1.5em;

			a.Button {
				display: flex;
				flex-direction: column;
				padding-left: 1.7em;
				padding-right: 1.7em;
				margin-right: 0;
				margin-left: 0;
			}
		}

		ul.nav {
			display: flex;
			flex-flow: wrap row;
			justify-content: center;
			align-items: center;

			li {

				@media (hover: hover) {

					&:hover {

						ul {
							display: flex;
							justify-content: center;

						}
					}
				}

				ul {

					a {

						&::before,
						&::after {
							display: none !important;
						}
					}
				}
			}

			ul {

				.admin-bar & {
					top: 104px;
				}

				&.active {
					display: flex;
				}

				flex-flow: nowrap row;
				justify-content: flex-start;
				align-items: flex-start;
				position: fixed;

				top: 73px;
				left: 0;
				right: 0;
				z-index: 2;
				margin: auto;
				width: $breakpoint-tablet-landscape;
				padding: 45px 0 25px;

				&::after {
					content: "";

					@include color(background-color, main-nav-submenu-background);
					position: absolute;
					top: 0;
					width: 100vw;
					height: 100%;
					box-shadow: 0 8px 6px -6px rgba(0, 0, 0, 0.08);
					z-index: -1;
				}

				ul {
					padding: 15px 0 0;

					li {

						> a {
							display: flex;
							flex-direction: column;
							justify-content: flex-start;
						}

						.menu-item-description {

							@include color(color, font-color-level3);
							display: block;
							font-size: 12px;
							line-height: 1.5;
							font-weight: $font-weight-normal;
							margin-top: -3px;
							width: calc(100% - 33px);
							white-space: break-spaces;
						}

					}
				}

				li {
					width: 20%;
				}
			}
		}
	}

	@media (min-width: $breakpoint-desktop) {

		.Header__flags__mobile {
			display: none;
		}

		ul.nav {

			> li > ul {
				width: $breakpoint-desktop;
			}
		}

	}


}

.Header__mobile__hamburger {
	cursor: pointer;

	.line {
		width: 1.65em;
		height: 2px;
		background-color: $black;
		border-radius: $border-radius;
		display: block;
		margin: 0.35em auto;
		-webkit-transition: all 0.3s ease-in-out;
		-o-transition: all 0.3s ease-in-out;
		transition: all 0.3s ease-in-out;
	}

	&.active {

		.line {

			&:nth-child(2) {
				opacity: 0;
			}

			&:nth-child(1) {
				transform: translateY(8px) rotate(45deg);
			}

			&:nth-child(3) {
				transform: translateY(-8px) rotate(-45deg);
			}
		}
	}

	@media (min-width: ($breakpoint-tablet-landscape )) {
		display: none;
	}
}


html[lang="de-DE"],
html[lang="et"],
html[lang="es-ES"],
html[lang="hr"],
html[lang="lv-LV"],
html[lang="lt-LT"],
html[lang="ru-RU"],
html[lang="sk-SK"],
html[lang="vi-VN"] {

	.Header__navigation .icon-header-menu {
		left: 0;
		width: 24px !important;
		background-size: 182px !important;
	}

	.Header__navigation .icon-header-menu-wordpress {
		background: url(../../images/icons-menu-integrations.png) -19px 0;
	}

	.Header__navigation .icon-header-menu-magento {
		background: url(../../images/icons-menu-integrations.png) 4px 0;
	}
}

html[lang="bg-BG"],
html[lang="lv-LV"] {

	.Header__navigation__buttons .Button {
		padding-left: em(24, $font-size-smaller);
		padding-right: em(24, $font-size-smaller);
	}
}

html[lang="vi-VN"] {

	.Header .Button--login {
		margin-left: 28px !important;
	}
}

@media (min-width: $breakpoint-tablet-landscape) and (max-width: ($breakpoint-desktop - 1px)) {

	.Header__navigation ul.nav li {
		font-size: 0.875rem;
		padding: 0 0.5em;
	}

	.Header__flags,
	.Button--login {
		margin-left: 1em !important;
	}

	.Header__navigation__buttons .Button {
		padding-left: 1em;
		padding-right: 1em;
		margin-left: 0.5em;
	}
}
