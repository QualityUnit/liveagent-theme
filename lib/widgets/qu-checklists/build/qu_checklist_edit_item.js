!function(){"use strict";var e=window.wp.element,t=window.wp.blockEditor;const{TextControl:c}=wp.components;var n=t=>{const{attributes:n,setAttributes:o}=t,{header:l,isOpen:r}=n;return(0,e.createElement)("div",{className:"qu-ChecklistItem__header",onClick:e=>{e.target===e.currentTarget&&o({isOpen:!r})}},(0,e.createElement)(c,{value:l,autoFocus:!0,onFocus:e=>e.currentTarget.select(),onChange:e=>o({header:e})}))},o=(window.wp.formatLibrary,window.wp.mediaUtils);const{TextControl:l,CheckboxControl:r}=wp.components;var s=t=>{const{attributes:c,setAttributes:n}=t,{customActionText:o,customAction:s}=c;return(0,e.createElement)("div",{className:"qu-ChecklistItem__footer"},s?(0,e.createElement)(l,{className:"Button Button--outline",value:o,autoFocus:!0,onFocus:e=>e.currentTarget.select(),onChange:e=>n({customActionText:e})}):null,(0,e.createElement)(r,{label:s?"":"Add custom action button",checked:s,onChange:()=>n({customAction:!s})}))};const{serialize:a,parse:i,getBlockVariations:u,unregisterBlockVariation:m}=wp.blocks,{Popover:d,SlotFillProvider:p}=wp.components,{isRTL:k}=wp.i18n,{useEffect:h,useState:E,useMemo:b}=wp.element,{useSelect:w}=wp.data;var g=c=>{const{attributes:n,setAttributes:l}=c,{content:r}=n,[g,v]=E([]),y=w((e=>{const t=e("core").canUser("create","media");return t||!1!==t}),[]),I={allowedBlockTypes:["core/heading","core/paragraph","core/list","core/image","core/embed","core/table"],isRTL:k()},C=["youtube"];u("core/embed").forEach((e=>{C.includes(e.name)||m("core/embed",e.name)}));const T=b((()=>y?{...I,mediaUpload(e){let{onError:t,...c}=e;(0,o.uploadMedia)({wpAllowedMimeTypes:I.allowedMimeTypes,onError:e=>{let{message:c}=e;return t(c)},...c})}}:I),[y,I]),A=e=>{v(e)};return h((()=>{null!=r&&r.length&&A((()=>i(r)))}),[]),(0,e.createElement)("div",{className:"qu-ChecklistItem__inn"},(0,e.createElement)(p,null,(0,e.createElement)(t.BlockEditorProvider,{value:g,onInput:A,onChange:e=>{v(e),l({content:a(e)})},settings:T},(0,e.createElement)("div",{className:"qu-ChecklistItem__content"},(0,e.createElement)(t.BlockTools,null,(0,e.createElement)("div",{className:"editor-styles-wrapper"},(0,e.createElement)(t.BlockEditorKeyboardShortcuts,null),(0,e.createElement)(t.WritingFlow,null,(0,e.createElement)(t.ObserveTyping,null,(0,e.createElement)(t.BlockList,null))))),(0,e.createElement)(s,c)),(0,e.createElement)(d.Slot,null))))},v=t=>{const{attributes:c}=t,{isOpen:o}=c;return(0,e.createElement)("div",{className:"qu-ChecklistItem "+(o?"open":"")},(0,e.createElement)(n,t),(0,e.createElement)(g,t))};const{registerBlockType:y}=wp.blocks;y("qu/checklistitem",{apiVersion:2,title:"Checklist Item",icon:"sticky",category:"widgets",parent:["qu/checklist"],attributes:{checklistId:{type:"string"},checklistItemId:{type:"string"},header:{type:"string",default:"Enter checklist title hereâ€¦"},content:{type:"string",default:""},isOpen:{type:"boolean",default:!0},customAction:{type:"boolean",default:!1},customActionText:{type:"string",default:"Custom Action Text"}},usesContext:["qu/checklistId"],edit:c=>{const n=(0,t.useBlockProps)(),{attributes:o,setAttributes:l}=c;return o.checklistId||l({checklistId:c.context["qu/checklistId"]}),o.checklistItemId||l({checklistItemId:n["data-block"]}),(0,e.createElement)("div",n,(0,e.createElement)(v,c))},save:()=>null})}();